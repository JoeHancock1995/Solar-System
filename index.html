<!DOCTYPE html>
<html>

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

    <title>Solar System App</title> 

    <!-- Babylon.js -->
    <script src="https://code.jquery.com/pep/0.4.2/pep.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/dat-gui/0.6.2/dat.gui.min.js"></script>
    <script src="https://preview.babylonjs.com/ammo.js"></script>
    <script src="https://preview.babylonjs.com/cannon.js"></script>
    <script src="https://preview.babylonjs.com/Oimo.js"></script>
    <script src="https://preview.babylonjs.com/libktx.js"></script>
    <script src="https://preview.babylonjs.com/earcut.min.js"></script>
    <script src="https://preview.babylonjs.com/babylon.js"></script>
    <script src="https://preview.babylonjs.com/inspector/babylon.inspector.bundle.js"></script>
    <script src="https://preview.babylonjs.com/materialsLibrary/babylonjs.materials.min.js"></script>
    <script src="https://preview.babylonjs.com/proceduralTexturesLibrary/babylonjs.proceduralTextures.min.js"></script>
    <script src="https://preview.babylonjs.com/postProcessesLibrary/babylonjs.postProcess.min.js"></script>
    <script src="https://preview.babylonjs.com/loaders/babylonjs.loaders.js"></script>
    <script src="https://preview.babylonjs.com/serializers/babylonjs.serializers.min.js"></script>
    <script src="https://preview.babylonjs.com/gui/babylon.gui.min.js"></script>

    <style>
        html,
        body {
            overflow: hidden;
            width: 100%;
            height: 100%;
            margin: 0;
            padding: 0;
        }

        #renderCanvas {
            width: 100%;
            height: 100%;
            touch-action: none;
        }
    </style>
</head>

<body>

    <canvas id="renderCanvas"></canvas>

    <script>
        var canvas = document.getElementById("renderCanvas");

        var engine = null;
        var scene = null;
        var createDefaultEngine = function () { return new BABYLON.Engine(canvas, true, { preserveDrawingBuffer: true, stencil: true }); };

//--------------------------------------------------------------------------------------------------------------------//
//--------------------------------------------------------------------------------------------------------------------//

function createScene() {
            BABYLON.Animation.AllowMatricesInterpolation = true;
            var scene = new BABYLON.Scene(engine);
            var camera = new BABYLON.UniversalCamera("camera", new BABYLON.Vector3(0, 60, 90), scene);
            camera.setTarget(BABYLON.Vector3.Zero());
            camera.attachControl(canvas, true);

//SKYBOX-------------------------------- --------------------------------------------------------------------------//
//----------------------------------------------------------------------------------------------------------------//

            var skybox = BABYLON.Mesh.CreateBox("skyBox", 5000.0, scene);
            var skyboxMaterial = new BABYLON.StandardMaterial("skyBox", scene);
            skyboxMaterial.backFaceCulling = false; //change backface culling back to false to display skybox.
            skyboxMaterial.reflectionTexture = new BABYLON.CubeTexture("./assets/textures/skybox", scene);
            skyboxMaterial.reflectionTexture.coordinatesMode = BABYLON.Texture.SKYBOX_MODE;
            skyboxMaterial.diffuseColor = new BABYLON.Color3(0, 0, 0);
            skyboxMaterial.specularColor = new BABYLON.Color3(0, 0, 0);
            skyboxMaterial.disableLighting = true;
            skybox.material = skyboxMaterial;

//SUN-------------------------------------------------------------------------------------------------------------//
//----------------------------------------------------------------------------------------------------------------//
            
            var sun = BABYLON.Mesh.CreateSphere("sun", 40, 20, scene); // surfaceParticles min/ max and sunEmitter.radius must be changed relative to diameter
            sun.position = new BABYLON.Vector3(0, 0, 0);

            var sunMercury = BABYLON.Mesh.CreateSphere("sunMercury", 0, 0, scene); //venus parent 
            sunMercury.position = new BABYLON.Vector3(0, 0, 0);

            var sunVenus = BABYLON.Mesh.CreateSphere("sunVenus", 0, 0, scene); //venus parent 
            sunVenus.position = new BABYLON.Vector3(0, 0, 0);

            var sunEarth = BABYLON.Mesh.CreateSphere("sunEarth", 0, 0, scene); // earth parent 
            sunEarth.position = new BABYLON.Vector3(0, 0, 0);

            var sunMars = BABYLON.Mesh.CreateSphere("sunMars", 0, 0, scene); // mars parent
            sunMars.position = new BABYLON.Vector3(0, 0, 0);

            var sunJupiter = BABYLON.Mesh.CreateSphere("sunJupiter", 0, 0, scene); //jupiter parent 
            sunJupiter.position = new BABYLON.Vector3(0, 0, 0);

            var sunSaturn = BABYLON.Mesh.CreateSphere("sunSaturn", 0, 0, scene); // saturn parent 
            sunSaturn.position = new BABYLON.Vector3(0, 0, 0);

            var sunUranus = BABYLON.Mesh.CreateSphere("sunUranus", 0, 0, scene); // uranus parent
            sunUranus.position = new BABYLON.Vector3(0, 0, 0);

            var sunNeptune = BABYLON.Mesh.CreateSphere("sunNeptune", 0, 0, scene); // neptune parent
            sunNeptune.position = new BABYLON.Vector3(0, 0, 0);

            
            
            
            
            var sunMaterial = new BABYLON.StandardMaterial("sunMaterial");
            sunMaterial.ambientTexture = new BABYLON.Texture("./assets/textures/sun.png");;
            sun.material = sunMaterial;
            sun.material.emissiveColor = new BABYLON.Color3(1, 1, 0);

            var light = new BABYLON.PointLight("Omni0", sun.position, scene);
            light.difuse = new BABYLON.Color3(0, 0, 0);


//PLANETS---------------------------------------------------------------------------------------------------------//
//----------------------------------------------------------------------------------------------------------------//


            var mercury = BABYLON.MeshBuilder.CreateSphere("mercury", { diameterX: .74, diameterY: .74, diameterZ: .74 }, scene);
            mercury.position.x = 22;
            mercury.parent = sunMercury;
            var mercuryMaterial = new BABYLON.StandardMaterial("mercuryMaterial");
            mercuryMaterial.ambientTexture = new BABYLON.Texture("./public/assets/textures/mercury.png");;
            mercury.material = mercuryMaterial;
            var alpha = Math.PI; //animations


            var venus = BABYLON.MeshBuilder.CreateSphere("venus", { diameterX: 1.7, diameterY: 1.7, diameterZ: 1.7 }, scene);
            venus.position.x = 48;
            venus.parent = sunVenus;
            var venusMaterial = new BABYLON.StandardMaterial("venusMaterial");
            venusMaterial.ambientTexture = new BABYLON.Texture("./public/assets/textures/venus.png");;
            venus.material = venusMaterial;
            var alpha = Math.PI;


            var earth = BABYLON.MeshBuilder.CreateSphere("earth", { diameterX: 1.7, diameterY: 1.7, diameterZ: 1.7 }, scene);
            earth.position.x = 60;
            earth.parent = sunEarth;
            var earthMaterial = new BABYLON.StandardMaterial("earthMaterial");
            earthMaterial.ambientTexture = new BABYLON.Texture("./public/assets/textures/earth.png");;
            earth.material = earthMaterial;
            var alpha = Math.PI;


            var mars = BABYLON.MeshBuilder.CreateSphere("mars", { diameterX: .92, diameterY: .92, diameterZ: .92 }, scene);
            mars.position.x = 96;
            mars.parent = sunMars;
            var marsMaterial = new BABYLON.StandardMaterial("marsMaterial");
            marsMaterial.ambientTexture = new BABYLON.Texture("./public/assets/textures/mars.png");;
            mars.material = marsMaterial;
            var alpha = Math.PI;


            var jupiter = BABYLON.MeshBuilder.CreateSphere("jupiter", { diameterX: 20.3, diameterY: 20.3, diameterZ: 20.3 }, scene);
            jupiter.position.x = 312;
            jupiter.parent = sunJupiter;
            var jupiterMaterial = new BABYLON.StandardMaterial("jupiterMaterial");
            jupiterMaterial.ambientTexture = new BABYLON.Texture("./public/assets/textures/jupiter.png");;
            jupiter.material = jupiterMaterial;
            var alpha = Math.PI;


            var saturn = BABYLON.MeshBuilder.CreateSphere("saturn", { diameterX: 16.7, diameterY: 16.7, diameterZ: 16.7 }, scene);
            saturn.position.x = 577;
            saturn.parent = sunSaturn;
            var saturnMaterial = new BABYLON.StandardMaterial("saturnMaterial");
            saturnMaterial.ambientTexture = new BABYLON.Texture("./public/assets/textures/saturn.png");;
            saturn.material = saturnMaterial;
            var alpha = Math.PI;


            var uranus = BABYLON.MeshBuilder.CreateSphere("uranus", { diameterX: 7.4, diameterY: 7.4, diameterZ: 7.4 }, scene);
            uranus.position.x = 1154;
            uranus.parent = sunUranus;
            var uranusMaterial = new BABYLON.StandardMaterial("uranusMaterial");
            uranusMaterial.ambientTexture = new BABYLON.Texture("./public/assets/textures/uranus.png");;
            uranus.material = uranusMaterial;
            var alpha = Math.PI;


            var neptune = BABYLON.MeshBuilder.CreateSphere("neptune", { diameterX: 5.6, diameterY: 5.6, diameterZ: 5.6 }, scene);
            neptune.position.x = 1789;
            neptune.parent = sunNeptune;
            var neptuneMaterial = new BABYLON.StandardMaterial("neptuneMaterial");
            neptuneMaterial.ambientTexture = new BABYLON.Texture("./public/assets/textures/neptune.png");;
            neptune.material = neptuneMaterial;
            var alpha = Math.PI;


//POSITION OF PLANETS---------------------------------------------------------------------------------------------//
//----------------------------------------------------------------------------------------------------------------//       

//may be reduntant

            mercury.position = new BABYLON.Vector3(26, 0, 26);
            venus.position = new BABYLON.Vector3(48, 0, 48);
            earth.position = new BABYLON.Vector3(60, 0, 60);
            mars.position = new BABYLON.Vector3(96, 0, 96);
            jupiter.position = new BABYLON.Vector3(312, 0, 312);
            saturn.position = new BABYLON.Vector3(577, 0, 577);
            uranus.position = new BABYLON.Vector3(1154, 0, 1154);
            neptune.position = new BABYLON.Vector3(1789, 0, 1789);


//GRAVITY & COLLISIONS--------------------------------------------------------------------------------------------//
//----------------------------------------------------------------------------------------------------------------//

            scene.gravity = new BABYLON.Vector3(0, -9.81, 0);
            camera.applyGravity = false;
            camera.ellipsoid = new BABYLON.Vector3(.00002, .00004, .00002);
            scene.collisionsEnabled = true;
            camera.checkCollisions = true;

            // skybox.checkCollisions = true;
            sun.checkCollisions = false;
            sunMercury.checkCollisions = false;
            sunVenus.checkCollisions = false;
            sunEarth.checkCollisions = false;
            sunMars.checkCollisions = false;
            sunJupiter.checkCollisions = false;
            sunSaturn.checkCollisions = false;
            sunUranus.checkCollisions = false;
            sunNeptune.checkCollisions = false;

            mercury.checkCollisions = true;
            venus.checkCollisions = true;
            earth.checkCollisions = true;
            mars.checkCollisions = true;
            jupiter.checkCollisions = true;
            saturn.checkCollisions = true;
            uranus.checkCollisions = true;
            neptune.checkCollisions = true;


            // var alpha = 0;
            // var animation1 = new BABYLON.Animation("tutoAnimation", "scaling.z", 30, BABYLON.Animation.ANIMATIONTYPE_FLOAT,
            //     BABYLON.Animation.ANIMATIONLOOPMODE_CYCLE);

       
            scene.registerBeforeRender(function () {
                mercury.position.x = 26 * Math.cos(alpha);
                mercury.parent.rotation.y += 0.042;
                mercury.position.z =26 * Math.sin(alpha);
                alpha = 0.005;
                
                venus.position.x = 48 * Math.cos(alpha);
                venus.parent.rotation.y += 0.016;
                venus.position.z = 48 * Math.sin(alpha);
                alpha = 0.002;

                earth.position.x = 60 * Math.cos(alpha);
                earth.parent.rotation.y += 0.01;
                earth.position.z = 60 * Math.sin(alpha);
                alpha += 0.001;

                mars.position.x = 96 * Math.cos(alpha);
                mars.parent.rotation.y += 0.005;
                mars.position.z = 96 * Math.sin(alpha);
                alpha += 0.0005;

                jupiter.position.x = 312 * Math.cos(alpha);
                jupiter.parent.rotation.y += 0.00084;
                jupiter.position.z = 312 * Math.sin(alpha);
                alpha += 0.001;

                saturn.position.x = 577 * Math.cos(alpha);
                saturn.parent.rotation.y += 0.00034;
                saturn.position.z = 577 * Math.sin(alpha);
                alpha += 0.00003;

                uranus.position.x = 1154 * Math.cos(alpha);
                uranus.parent.rotation.y += 0.000015;
                uranus.position.z = 1154 * Math.sin(alpha);
                alpha += 0.000001;

                neptune.position.x = 1789 * Math.cos(alpha);
                neptune.parent.rotation.y += 0.000006;
                neptune.position.z = 1789 * Math.sin(alpha);
                alpha += 0.001;
            });

            return scene;
        };

        engine = createDefaultEngine();
        if (!engine) throw 'engine should not be null.';
        scene = createScene();

        engine.runRenderLoop(function () {
            if (scene) {
                scene.render();
            }
        });

        // Resize
        window.addEventListener("resize", function () {
            engine.resize();
        });
    </script>
<script type="module">

    // Import the functions you need from the SDKs you need
  
    import { initializeApp } from "https://www.gstatic.com/firebasejs/9.7.0/firebase-app.js";
  
    import { getAnalytics } from "https://www.gstatic.com/firebasejs/9.7.0/firebase-analytics.js";
  
    // TODO: Add SDKs for Firebase products that you want to use
  
    // https://firebase.google.com/docs/web/setup#available-libraries
  
  
    // Your web app's Firebase configuration
  
    // For Firebase JS SDK v7.20.0 and later, measurementId is optional
  
    const firebaseConfig = {
  
      apiKey: "AIzaSyDnYd4GRuNcHd4hALKufbQKfdk_q9zBcws",
  
      authDomain: "plumedata-f27d6.firebaseapp.com",
  
      projectId: "plumedata-f27d6",
  
      storageBucket: "plumedata-f27d6.appspot.com",
  
      messagingSenderId: "642082095552",
  
      appId: "1:642082095552:web:29b256724d0fada78f8825",
  
      measurementId: "G-M3GJZ358K4"
  
    };
  
  
    // Initialize Firebase
  
    const app = initializeApp(firebaseConfig);
  
    const analytics = getAnalytics(app);
  
  </script>
</body>

</html>